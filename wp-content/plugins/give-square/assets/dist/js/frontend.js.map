{"version":3,"sources":["webpack:///js/frontend.js","webpack:///webpack/bootstrap b50d5dabaab6570aa43f","webpack:///./assets/src/js/frontend/give-square-frontend.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","document","addEventListener","event","formWraps","querySelectorAll","give_square","Array","forEach","formWrap","hiddenBtn","form_element","querySelector","value","Give_Square","jQuery","on","xhr","settings","destroy","create_payment_form","build","Promise","resolve","reject","setTimeout","then","recalculate","$form","this","$idPrefix","find","val","paymentForm","requestCardNonce","preventDefault","defaultGateway","formID","submitButton","_this","formIDPrefix","SqPaymentForm","applicationId","giveSquareLocaliseVars","applicationID","locationId","locationID","inputClass","autoBuild","inputStyles","applePay","masterpass","cardNumber","elementId","placeholder","cardNumberPlaceholder","cvv","cvcPlaceholder","expirationDate","cardExpiryPlaceholder","postalCode","postalCodePlaceholder","callbacks","inputEventReceived","inputEvent","eventType","cardBrandClass","cardBrand","toLowerCase","className","postalCodeValue","cardNonceResponseReceived","errors","nonce","cardData","error_message","error","message","innerHTML","give_global_vars","complete_purchase","getAttribute","removeAttribute","style","display","submit","unsupportedBrowserDetected","alert","unsupportedBrowserText","recalculateSize"],"mappings":"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","file":"js/frontend.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(1);\nmodule.exports = __webpack_require__(2);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Load JS when DOM is loaded successfully.\ndocument.addEventListener('DOMContentLoaded', function (event) {\n\n\tvar formWraps = document.querySelectorAll('.give-form-wrap');\n\tvar give_square = {};\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call(formWraps, function (formWrap) {\n\n\t\tvar hiddenBtn = null;\n\t\tvar form_element = formWrap.querySelector('.give-form');\n\t\tvar formIdPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\n\t\tif (null !== form_element.querySelector('.give-btn-modal')) {\n\t\t\thiddenBtn = form_element.querySelector('.give-btn-modal');\n\t\t} else if (null !== form_element.querySelector('.give-btn-reveal')) {\n\t\t\thiddenBtn = form_element.querySelector('.give-btn-reveal');\n\t\t}\n\n\t\tgive_square = new Give_Square(form_element, hiddenBtn, event);\n\n\t\t// Mount and Un-Mount CC Fields on gateway load.\n\t\tjQuery(document).on('give_gateway_loaded', function (event, xhr, settings) {\n\n\t\t\tif (form_element.querySelector('.give-gateway-option-selected .give-gateway').value === 'square') {\n\n\t\t\t\tgive_square.destroy(form_element);\n\n\t\t\t\tgive_square.create_payment_form(form_element);\n\n\t\t\t\tgive_square.build(form_element);\n\t\t\t}\n\t\t});\n\n\t\tif (null !== hiddenBtn) {\n\t\t\thiddenBtn.addEventListener('click', function () {\n\n\t\t\t\tif (form_element.querySelector('.give-gateway:checked').value === 'square') {\n\t\t\t\t\tvar hiddenBtnPromise = new Promise(function (resolve, reject) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tresolve(form_element.querySelector('.give-modal-open'));\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t});\n\n\t\t\t\t\thiddenBtnPromise.then(function (value) {\n\t\t\t\t\t\tgive_square.destroy(form_element);\n\t\t\t\t\t\tgive_square.create_payment_form(form_element);\n\t\t\t\t\t\tgive_square.build(form_element);\n\t\t\t\t\t\tgive_square.recalculate(form_element);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t// Process Donation using Square on form submission.\n\tjQuery('body').on('submit', '.give-form', function (event) {\n\n\t\tvar $form = jQuery(this);\n\t\tvar $idPrefix = $form.find('input[name=\"give-form-id-prefix\"]').val();\n\n\t\tif ('square' === $form.find('input.give-gateway:checked').val()) {\n\t\t\tgive_square.paymentForm[$idPrefix].requestCardNonce();\n\t\t\tevent.preventDefault();\n\t\t}\n\t});\n});\n\nvar Give_Square = function () {\n\n\t/**\n  * Constructor to initialize the Give_Square class.\n  *\n  * @since 1.0.0\n  *\n  * @param {object} form_element Form Element.\n  * @param {object} hiddenBtn    Support for hidden CC fields.\n  * @param {object} event        Event object.\n  */\n\tfunction Give_Square(form_element, hiddenBtn, event) {\n\t\t_classCallCheck(this, Give_Square);\n\n\t\tthis.defaultGateway = '';\n\t\tthis.paymentForm = [];\n\t\tthis.event = event;\n\t\tthis.formID = form_element.querySelector('input[name=\"give-form-id\"]').value;\n\t\tthis.submitButton = form_element.querySelector('#give-purchase-button');\n\n\t\tif (null !== form_element.querySelector('.give-gateway-option-selected .give-gateway').value) {\n\t\t\tthis.defaultGateway = form_element.querySelector('.give-gateway-option-selected .give-gateway').value;\n\t\t}\n\n\t\t// Load SQPaymentForm only if the default gateway is Square.\n\t\tif ('square' === this.defaultGateway && null === hiddenBtn) {\n\t\t\tthis.create_payment_form(form_element);\n\t\t\tthis.build(form_element);\n\t\t}\n\t}\n\n\t/**\n  * This function creates a new payment form.\n  *\n  * @since 1.0.0\n  */\n\n\n\t_createClass(Give_Square, [{\n\t\tkey: 'create_payment_form',\n\t\tvalue: function create_payment_form(form_element) {\n\t\t\tvar _this = this;\n\n\t\t\tvar formIDPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\n\t\t\t// Create and initialize payment form object.\n\t\t\tthis.paymentForm[formIDPrefix] = new SqPaymentForm({\n\n\t\t\t\t// Initialize the payment form elements.\n\t\t\t\tapplicationId: giveSquareLocaliseVars.applicationID,\n\t\t\t\tlocationId: giveSquareLocaliseVars.locationID,\n\t\t\t\tinputClass: 'give-square-cc-fields',\n\t\t\t\tautoBuild: false,\n\n\t\t\t\t// Customize the CSS of iFrame elements.\n\t\t\t\tinputStyles: [giveSquareLocaliseVars.inputStyles],\n\n\t\t\t\t// Initialize Apple Pay.\n\t\t\t\tapplePay: false,\n\n\t\t\t\t// Initialize MasterPass.\n\t\t\t\tmasterpass: false,\n\n\t\t\t\t// Initialize the CC placeholders.\n\t\t\t\tcardNumber: {\n\t\t\t\t\telementId: 'give-card-number-field-' + formIDPrefix,\n\t\t\t\t\tplaceholder: giveSquareLocaliseVars.cardNumberPlaceholder\n\t\t\t\t},\n\t\t\t\tcvv: {\n\t\t\t\t\telementId: 'give-card-cvc-field-' + formIDPrefix,\n\t\t\t\t\tplaceholder: giveSquareLocaliseVars.cvcPlaceholder\n\t\t\t\t},\n\t\t\t\texpirationDate: {\n\t\t\t\t\telementId: 'give-card-expiration-field-' + formIDPrefix,\n\t\t\t\t\tplaceholder: giveSquareLocaliseVars.cardExpiryPlaceholder\n\t\t\t\t},\n\t\t\t\tpostalCode: {\n\t\t\t\t\telementId: 'give-square-card-zip-' + formIDPrefix,\n\t\t\t\t\tplaceholder: giveSquareLocaliseVars.postalCodePlaceholder\n\t\t\t\t},\n\n\t\t\t\t// Callback functions.\n\t\t\t\tcallbacks: {\n\n\t\t\t\t\t// Trigger Events related to CC Input Fields.\n\t\t\t\t\tinputEventReceived: function inputEventReceived(inputEvent) {\n\n\t\t\t\t\t\tswitch (inputEvent.eventType) {\n\t\t\t\t\t\t\tcase 'cardBrandChanged':\n\n\t\t\t\t\t\t\t\tvar cardBrandClass = inputEvent.cardBrand.toLowerCase();\n\t\t\t\t\t\t\t\tif ('discoverdiners' === inputEvent.cardBrand.toLowerCase()) {\n\t\t\t\t\t\t\t\t\tcardBrandClass = 'dinersclub';\n\t\t\t\t\t\t\t\t} else if ('americanexpress' === inputEvent.cardBrand.toLowerCase()) {\n\t\t\t\t\t\t\t\t\tcardBrandClass = 'amex';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tform_element.querySelector('.card-type').className = 'card-type ' + cardBrandClass;\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'postalCodeChanged':\n\t\t\t\t\t\t\t\tform_element.querySelector('#give-square-card-zip-hidden-' + formIDPrefix).value = inputEvent.postalCodeValue;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Trigger Events when successful paymentForm request received.\n\t\t\t\t\tcardNonceResponseReceived: function cardNonceResponseReceived(errors, nonce, cardData) {\n\n\t\t\t\t\t\tif (null !== errors && errors.length > 0) {\n\n\t\t\t\t\t\t\tvar error_message = '';\n\n\t\t\t\t\t\t\t// Log nonce generation errors to console.\n\t\t\t\t\t\t\terrors.forEach(function (error) {\n\t\t\t\t\t\t\t\terror_message += '<div class=\"give_errors\"><p class=\"give_error\">' + error.message + '</p></div>';\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Display all errors on the form.\n\t\t\t\t\t\t\tform_element.querySelector('#give-square-payment-errors-' + formIDPrefix).innerHTML = error_message;\n\n\t\t\t\t\t\t\t// Reset Donate Button.\n\t\t\t\t\t\t\tif (give_global_vars.complete_purchase) {\n\t\t\t\t\t\t\t\t_this.submitButton.value = give_global_vars.complete_purchase;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this.submitButton.value = _this.submitButton.getAttribute('data-before-validation-label');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_this.submitButton.removeAttribute('disabled');\n\n\t\t\t\t\t\t\t// Hide the loading animation.\n\t\t\t\t\t\t\tform_element.querySelector('.give-submit-button-wrap').querySelector('.give-loading-animation').style.display = 'none';\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Assign the nonce value to the hidden form field.\n\t\t\t\t\t\t\tform_element.querySelector('#card-nonce-' + formIDPrefix).value = nonce;\n\n\t\t\t\t\t\t\tform_element.submit();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Trigger event when unsupported browser detected.\n\t\t\t\t\tunsupportedBrowserDetected: function unsupportedBrowserDetected() {\n\t\t\t\t\t\talert(giveSquareLocaliseVars.unsupportedBrowserText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * This function will load/build the payment form once object is created.\n   *\n   * @since 1.0.0\n   */\n\n\t}, {\n\t\tkey: 'build',\n\t\tvalue: function build(form_element) {\n\n\t\t\tvar formIDPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\n\t\t\t// Build New Payment Form.\n\t\t\tthis.paymentForm[formIDPrefix].build();\n\t\t}\n\n\t\t/**\n   * This function will destroy existing payment form including its object.\n   *\n   * @since 1.0.0\n   */\n\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy(form_element) {\n\n\t\t\tvar formIDPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\n\t\t\t// Destroy Existing Payment Form, if exists.\n\t\t\tif ('undefined' !== typeof this.paymentForm[formIDPrefix]) {\n\t\t\t\tthis.paymentForm[formIDPrefix].destroy();\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * This function will recalculate size of existing payment form when hidden.\n   *\n   * @since 1.0.0\n   */\n\n\t}, {\n\t\tkey: 'recalculate',\n\t\tvalue: function recalculate(form_element) {\n\n\t\t\tvar formIDPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\n\t\t\t// Destroy Existing Payment Form, if exists.\n\t\t\tif ('undefined' !== typeof this.paymentForm[formIDPrefix]) {\n\t\t\t\tthis.paymentForm[formIDPrefix].recalculateSize();\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Give_Square;\n}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// js/frontend.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b50d5dabaab6570aa43f","// Load JS when DOM is loaded successfully.\ndocument.addEventListener( 'DOMContentLoaded', event => {\n\n\tconst formWraps = document.querySelectorAll( '.give-form-wrap' );\n\tlet give_square = {};\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call( formWraps, function( formWrap ) {\n\n\t\tlet hiddenBtn      = null;\n\t\tconst form_element = formWrap.querySelector( '.give-form' );\n\t\tconst formIdPrefix = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\n\t\tif ( null !== form_element.querySelector( '.give-btn-modal' ) ) {\n\t\t\thiddenBtn = form_element.querySelector( '.give-btn-modal' );\n\t\t} else if ( null !== form_element.querySelector( '.give-btn-reveal' ) ) {\n\t\t\thiddenBtn = form_element.querySelector( '.give-btn-reveal' );\n\t\t}\n\n\t\tgive_square  = new Give_Square( form_element, hiddenBtn, event );\n\n\t\t// Mount and Un-Mount CC Fields on gateway load.\n\t\tjQuery( document ).on( 'give_gateway_loaded', function( event, xhr, settings ) {\n\n\t\t\tif ( form_element.querySelector( '.give-gateway-option-selected .give-gateway' ).value === 'square' ) {\n\n\t\t\t\tgive_square.destroy( form_element );\n\n\t\t\t\tgive_square.create_payment_form( form_element );\n\n\t\t\t\tgive_square.build( form_element );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( null !== hiddenBtn ) {\n\t\t\thiddenBtn.addEventListener( 'click', () => {\n\n\t\t\t\tif ( form_element.querySelector( '.give-gateway:checked' ).value === 'square' ) {\n\t\t\t\t\tconst hiddenBtnPromise = new Promise( function( resolve, reject ) {\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\tresolve( form_element.querySelector( '.give-modal-open' ) );\n\t\t\t\t\t\t}, 300 );\n\t\t\t\t\t} );\n\n\t\t\t\t\thiddenBtnPromise.then( function( value ) {\n\t\t\t\t\t\tgive_square.destroy( form_element );\n\t\t\t\t\t\tgive_square.create_payment_form( form_element );\n\t\t\t\t\t\tgive_square.build( form_element );\n\t\t\t\t\t\tgive_square.recalculate( form_element );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t});\n\n\t// Process Donation using Square on form submission.\n\tjQuery( 'body' ).on( 'submit', '.give-form', function( event ) {\n\n\t\tconst $form     = jQuery( this );\n\t\tconst $idPrefix = $form.find( 'input[name=\"give-form-id-prefix\"]' ).val();\n\n\t\tif ( 'square' === $form.find( 'input.give-gateway:checked' ).val() ) {\n\t\t\tgive_square.paymentForm[ $idPrefix ].requestCardNonce();\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t});\n});\n\nclass Give_Square {\n\n\t/**\n\t * Constructor to initialize the Give_Square class.\n\t *\n\t * @since 1.0.0\n\t *\n\t * @param {object} form_element Form Element.\n\t * @param {object} hiddenBtn    Support for hidden CC fields.\n\t * @param {object} event        Event object.\n\t */\n\tconstructor( form_element, hiddenBtn, event ) {\n\t\tthis.defaultGateway = '';\n\t\tthis.paymentForm    = [];\n\t\tthis.event        = event;\n\t\tthis.formID       = form_element.querySelector( 'input[name=\"give-form-id\"]' ).value;\n\t\tthis.submitButton = form_element.querySelector( '#give-purchase-button' );\n\n\t\tif ( null !== form_element.querySelector( '.give-gateway-option-selected .give-gateway' ).value ) {\n\t\t\tthis.defaultGateway = form_element.querySelector( '.give-gateway-option-selected .give-gateway' ).value;\n\t\t}\n\n\t\t// Load SQPaymentForm only if the default gateway is Square.\n\t\tif ( 'square' === this.defaultGateway && null === hiddenBtn ) {\n\t\t\tthis.create_payment_form( form_element );\n\t\t\tthis.build( form_element );\n\t\t}\n\n\t}\n\n\t/**\n\t * This function creates a new payment form.\n\t *\n\t * @since 1.0.0\n\t */\n\tcreate_payment_form( form_element ) {\n\n\t\tconst formIDPrefix = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\n\t\t// Create and initialize payment form object.\n\t\tthis.paymentForm[ formIDPrefix ] = new SqPaymentForm( {\n\n\t\t\t// Initialize the payment form elements.\n\t\t\tapplicationId: giveSquareLocaliseVars.applicationID,\n\t\t\tlocationId: giveSquareLocaliseVars.locationID,\n\t\t\tinputClass: 'give-square-cc-fields',\n\t\t\tautoBuild: false,\n\n\t\t\t// Customize the CSS of iFrame elements.\n\t\t\tinputStyles: [\n\t\t\t\tgiveSquareLocaliseVars.inputStyles\n\t\t\t],\n\n\t\t\t// Initialize Apple Pay.\n\t\t\tapplePay: false,\n\n\t\t\t// Initialize MasterPass.\n\t\t\tmasterpass: false,\n\n\t\t\t// Initialize the CC placeholders.\n\t\t\tcardNumber: {\n\t\t\t\telementId: 'give-card-number-field-' + formIDPrefix,\n\t\t\t\tplaceholder: giveSquareLocaliseVars.cardNumberPlaceholder\n\t\t\t},\n\t\t\tcvv: {\n\t\t\t\telementId: 'give-card-cvc-field-' + formIDPrefix,\n\t\t\t\tplaceholder: giveSquareLocaliseVars.cvcPlaceholder\n\t\t\t},\n\t\t\texpirationDate: {\n\t\t\t\telementId: 'give-card-expiration-field-' + formIDPrefix,\n\t\t\t\tplaceholder: giveSquareLocaliseVars.cardExpiryPlaceholder\n\t\t\t},\n\t\t\tpostalCode: {\n\t\t\t\telementId: 'give-square-card-zip-' + formIDPrefix,\n\t\t\t\tplaceholder: giveSquareLocaliseVars.postalCodePlaceholder\n\t\t\t},\n\n\t\t\t// Callback functions.\n\t\t\tcallbacks: {\n\n\t\t\t\t// Trigger Events related to CC Input Fields.\n\t\t\t\tinputEventReceived: ( inputEvent ) => {\n\n\t\t\t\t\tswitch ( inputEvent.eventType ) {\n\t\t\t\t\t\tcase 'cardBrandChanged':\n\n\t\t\t\t\t\t\tlet cardBrandClass = inputEvent.cardBrand.toLowerCase();\n\t\t\t\t\t\t\tif ('discoverdiners' === inputEvent.cardBrand.toLowerCase()) {\n\t\t\t\t\t\t\t\tcardBrandClass = 'dinersclub';\n\t\t\t\t\t\t\t} else if ('americanexpress' === inputEvent.cardBrand.toLowerCase()) {\n\t\t\t\t\t\t\t\tcardBrandClass = 'amex';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tform_element.querySelector('.card-type').className = `card-type ${cardBrandClass}`;\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'postalCodeChanged':\n\t\t\t\t\t\t\tform_element.querySelector( '#give-square-card-zip-hidden-' + formIDPrefix ).value = inputEvent.postalCodeValue;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// Trigger Events when successful paymentForm request received.\n\t\t\t\tcardNonceResponseReceived: ( errors, nonce, cardData ) => {\n\n\t\t\t\t\tif ( null !== errors && errors.length > 0 ) {\n\n\t\t\t\t\t\tlet error_message = '';\n\n\t\t\t\t\t\t// Log nonce generation errors to console.\n\t\t\t\t\t\terrors.forEach( function( error ) {\n\t\t\t\t\t\t\terror_message += '<div class=\"give_errors\"><p class=\"give_error\">' + error.message + '</p></div>';\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Display all errors on the form.\n\t\t\t\t\t\tform_element.querySelector( '#give-square-payment-errors-' + formIDPrefix ).innerHTML = error_message;\n\n\t\t\t\t\t\t// Reset Donate Button.\n\t\t\t\t\t\tif ( give_global_vars.complete_purchase ) {\n\t\t\t\t\t\t\tthis.submitButton.value = give_global_vars.complete_purchase;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.submitButton.value = this.submitButton.getAttribute( 'data-before-validation-label' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.submitButton.removeAttribute( 'disabled' );\n\n\t\t\t\t\t\t// Hide the loading animation.\n\t\t\t\t\t\tform_element.querySelector( '.give-submit-button-wrap' )\n\t\t\t\t\t\t\t.querySelector( '.give-loading-animation' ).style.display = 'none';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Assign the nonce value to the hidden form field.\n\t\t\t\t\t\tform_element.querySelector( `#card-nonce-${formIDPrefix}` ).value = nonce;\n\n\t\t\t\t\t\tform_element.submit();\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\t// Trigger event when unsupported browser detected.\n\t\t\t\tunsupportedBrowserDetected: () => {\n\t\t\t\t\talert( giveSquareLocaliseVars.unsupportedBrowserText );\n\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t}\n\n\t/**\n\t * This function will load/build the payment form once object is created.\n\t *\n\t * @since 1.0.0\n\t */\n\tbuild( form_element ) {\n\n\t\tconst formIDPrefix = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\n\t\t// Build New Payment Form.\n\t\tthis.paymentForm[ formIDPrefix ].build();\n\t}\n\n\t/**\n\t * This function will destroy existing payment form including its object.\n\t *\n\t * @since 1.0.0\n\t */\n\tdestroy( form_element ) {\n\n\t\tconst formIDPrefix = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\n\t\t// Destroy Existing Payment Form, if exists.\n\t\tif ( 'undefined' !== typeof this.paymentForm[ formIDPrefix ] ) {\n\t\t\tthis.paymentForm[ formIDPrefix ].destroy();\n\t\t}\n\t}\n\n\t/**\n\t * This function will recalculate size of existing payment form when hidden.\n\t *\n\t * @since 1.0.0\n\t */\n\trecalculate( form_element ) {\n\n\t\tconst formIDPrefix = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\n\t\t// Destroy Existing Payment Form, if exists.\n\t\tif ( 'undefined' !== typeof this.paymentForm[ formIDPrefix ] ) {\n\t\t\tthis.paymentForm[ formIDPrefix ].recalculateSize();\n\t\t}\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/src/js/frontend/give-square-frontend.js"],"sourceRoot":""}